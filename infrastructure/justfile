# Development commands
dev-up:
    @echo "🚀 Starting development environment..."
    @./scripts/setup-dev.sh

dev-down:
    @echo "🛑 Stopping development environment..."
    @docker-compose -f docker/docker-compose.dev.yml down -v --remove-orphans

dev-logs:
    @docker-compose -f docker/docker-compose.dev.yml logs -f

dev-restart:
    @echo "🔄 Restarting development environment..."
    @just dev-down
    @just dev-up

# Production commands  
prod-up:
    @echo "🚀 Starting production environment..."
    @./scripts/setup-prod.sh

prod-down:
    @echo "🛑 Stopping production environment..."
    @docker-compose -f docker/docker-compose.prod.yml down
    @docker-compose -f docker/docker-compose.traefik.yml down

prod-logs:
    @docker-compose -f docker/docker-compose.prod.yml logs -f

prod-app-only:
    @echo "🚀 Starting production app only (Traefik already running)..."
    @docker-compose -f docker/docker-compose.prod.yml up -d

prod-traefik-only:
    @echo "🚀 Starting Traefik only..."
    @docker-compose -f docker/docker-compose.traefik.yml up -d

# Utility commands
clean:
    @echo "🧹 Cleaning up Docker resources..."
    @docker system prune -f
    @docker volume prune -f

build:
    @echo "🔨 Building application..."
    @docker-compose -f docker/docker-compose.prod.yml build --no-cache

ssl-certs:
    @echo "🔐 Generating SSL certificates for development..."
    @cd traefik/certs && mkcert "*.interestingapp.local" interestingapp.local

# Help command
help:
    @echo "Available commands:"
    @echo "  dev-up        - Start development environment with HTTPS"
    @echo "  dev-down      - Stop development environment"  
    @echo "  dev-logs      - Follow development logs"
    @echo "  dev-restart   - Restart development environment"
    @echo ""
    @echo "  prod-up       - Start production environment (Traefik + App)"
    @echo "  prod-down     - Stop production environment"
    @echo "  prod-logs     - Follow production logs"
    @echo "  prod-app-only - Start only the app (Traefik running separately)"
    @echo "  prod-traefik-only - Start only Traefik"
    @echo ""
    @echo "  build         - Build production images"
    @echo "  clean         - Clean up Docker resources"
    @echo "  ssl-certs     - Generate development SSL certificates"